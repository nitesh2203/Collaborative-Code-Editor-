{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Async thunks\nexport const fetchDocuments = createAsyncThunk('document/fetchDocuments', async (_, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      token\n    } = getState().auth;\n    const response = await axios.get(`${API_URL}/documents`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const createDocument = createAsyncThunk('document/createDocument', async ({\n  title,\n  language,\n  content\n}, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      token\n    } = getState().auth;\n    const response = await axios.post(`${API_URL}/documents`, {\n      title,\n      language,\n      content\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const updateDocument = createAsyncThunk('document/updateDocument', async ({\n  id,\n  content,\n  language\n}, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      token\n    } = getState().auth;\n    const response = await axios.put(`${API_URL}/documents/${id}`, {\n      content,\n      language\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const deleteDocument = createAsyncThunk('document/deleteDocument', async (id, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      token\n    } = getState().auth;\n    await axios.delete(`${API_URL}/documents/${id}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return id;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nconst initialState = {\n  documents: [],\n  currentDocument: null,\n  loading: false,\n  error: null\n};\nconst documentSlice = createSlice({\n  name: 'document',\n  initialState,\n  reducers: {\n    setCurrentDocument: (state, action) => {\n      state.currentDocument = action.payload;\n    },\n    clearError: state => {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Fetch documents\n    .addCase(fetchDocuments.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchDocuments.fulfilled, (state, action) => {\n      state.loading = false;\n      state.documents = action.payload;\n    }).addCase(fetchDocuments.rejected, (state, action) => {\n      var _action$payload;\n      state.loading = false;\n      state.error = ((_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.message) || 'Failed to fetch documents';\n    })\n    // Create document\n    .addCase(createDocument.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(createDocument.fulfilled, (state, action) => {\n      state.loading = false;\n      state.documents.push(action.payload);\n    }).addCase(createDocument.rejected, (state, action) => {\n      var _action$payload2;\n      state.loading = false;\n      state.error = ((_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.message) || 'Failed to create document';\n    })\n    // Update document\n    .addCase(updateDocument.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(updateDocument.fulfilled, (state, action) => {\n      var _state$currentDocumen;\n      state.loading = false;\n      const index = state.documents.findIndex(doc => doc._id === action.payload._id);\n      if (index !== -1) {\n        state.documents[index] = action.payload;\n      }\n      if (((_state$currentDocumen = state.currentDocument) === null || _state$currentDocumen === void 0 ? void 0 : _state$currentDocumen._id) === action.payload._id) {\n        state.currentDocument = action.payload;\n      }\n    }).addCase(updateDocument.rejected, (state, action) => {\n      var _action$payload3;\n      state.loading = false;\n      state.error = ((_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.message) || 'Failed to update document';\n    })\n    // Delete document\n    .addCase(deleteDocument.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(deleteDocument.fulfilled, (state, action) => {\n      var _state$currentDocumen2;\n      state.loading = false;\n      state.documents = state.documents.filter(doc => doc._id !== action.payload);\n      if (((_state$currentDocumen2 = state.currentDocument) === null || _state$currentDocumen2 === void 0 ? void 0 : _state$currentDocumen2._id) === action.payload) {\n        state.currentDocument = null;\n      }\n    }).addCase(deleteDocument.rejected, (state, action) => {\n      var _action$payload4;\n      state.loading = false;\n      state.error = ((_action$payload4 = action.payload) === null || _action$payload4 === void 0 ? void 0 : _action$payload4.message) || 'Failed to delete document';\n    });\n  }\n});\nexport const {\n  setCurrentDocument,\n  clearError\n} = documentSlice.actions;\nexport default documentSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","API_URL","process","env","REACT_APP_API_URL","fetchDocuments","_","getState","rejectWithValue","token","auth","response","get","headers","Authorization","data","error","createDocument","title","language","content","post","updateDocument","id","put","deleteDocument","delete","initialState","documents","currentDocument","loading","documentSlice","name","reducers","setCurrentDocument","state","action","payload","clearError","extraReducers","builder","addCase","pending","fulfilled","rejected","_action$payload","message","push","_action$payload2","_state$currentDocumen","index","findIndex","doc","_id","_action$payload3","_state$currentDocumen2","filter","_action$payload4","actions","reducer"],"sources":["C:/Users/Nitesh/Downloads/collaborative code editor/frontend/src/store/slices/documentSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n// Async thunks\r\nexport const fetchDocuments = createAsyncThunk(\r\n  'document/fetchDocuments',\r\n  async (_, { getState, rejectWithValue }) => {\r\n    try {\r\n      const { token } = getState().auth;\r\n      const response = await axios.get(`${API_URL}/documents`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const createDocument = createAsyncThunk(\r\n  'document/createDocument',\r\n  async ({ title, language, content }, { getState, rejectWithValue }) => {\r\n    try {\r\n      const { token } = getState().auth;\r\n      const response = await axios.post(\r\n        `${API_URL}/documents`,\r\n        { title, language, content },\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const updateDocument = createAsyncThunk(\r\n  'document/updateDocument',\r\n  async ({ id, content, language }, { getState, rejectWithValue }) => {\r\n    try {\r\n      const { token } = getState().auth;\r\n      const response = await axios.put(\r\n        `${API_URL}/documents/${id}`,\r\n        { content, language },\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const deleteDocument = createAsyncThunk(\r\n  'document/deleteDocument',\r\n  async (id, { getState, rejectWithValue }) => {\r\n    try {\r\n      const { token } = getState().auth;\r\n      await axios.delete(`${API_URL}/documents/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      return id;\r\n    } catch (error) {\r\n      return rejectWithValue(error.response.data);\r\n    }\r\n  }\r\n);\r\n\r\nconst initialState = {\r\n  documents: [],\r\n  currentDocument: null,\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\nconst documentSlice = createSlice({\r\n  name: 'document',\r\n  initialState,\r\n  reducers: {\r\n    setCurrentDocument: (state, action) => {\r\n      state.currentDocument = action.payload;\r\n    },\r\n    clearError: (state) => {\r\n      state.error = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Fetch documents\r\n      .addCase(fetchDocuments.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchDocuments.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.documents = action.payload;\r\n      })\r\n      .addCase(fetchDocuments.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload?.message || 'Failed to fetch documents';\r\n      })\r\n      // Create document\r\n      .addCase(createDocument.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(createDocument.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.documents.push(action.payload);\r\n      })\r\n      .addCase(createDocument.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload?.message || 'Failed to create document';\r\n      })\r\n      // Update document\r\n      .addCase(updateDocument.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(updateDocument.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        const index = state.documents.findIndex((doc) => doc._id === action.payload._id);\r\n        if (index !== -1) {\r\n          state.documents[index] = action.payload;\r\n        }\r\n        if (state.currentDocument?._id === action.payload._id) {\r\n          state.currentDocument = action.payload;\r\n        }\r\n      })\r\n      .addCase(updateDocument.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload?.message || 'Failed to update document';\r\n      })\r\n      // Delete document\r\n      .addCase(deleteDocument.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(deleteDocument.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.documents = state.documents.filter((doc) => doc._id !== action.payload);\r\n        if (state.currentDocument?._id === action.payload) {\r\n          state.currentDocument = null;\r\n        }\r\n      })\r\n      .addCase(deleteDocument.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload?.message || 'Failed to delete document';\r\n      });\r\n  },\r\n});\r\n\r\nexport const { setCurrentDocument, clearError } = documentSlice.actions;\r\nexport default documentSlice.reducer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}